<?xml version="1.0" encoding="UTF-8"?>
<table xmlns="http://query.yahooapis.com/v1/schema/table.xsd">
  <meta>
    <sampleQuery>select * from {table};</sampleQuery>
  </meta>
  <bindings>
    <select itemPath="" produces="XML">
      <urls>
        <url>http://www.caxtonaudio.com.au/tradeins.html</url>
      </urls>
      <execute><![CDATA[

      	query = y.query("select * from html where url=\"http://www.caxtonaudio.com.au/tradeins.html\" and xpath = \"//div[@id='maincontent']/table/tr[position() != 1]\"");

	manufacturers = y.xpath(query.results, "/results/tr/td[position()=1]/p")
	products = y.xpath(query.results, "/results/tr/td[position()=2]/p")
	prices = y.xpath(query.results, "/results/tr/td[position()=3]/p")

	var data;
	data = "<products>";
	for (var i = 0; i < manufacturers.length(); i++) {
		data += "<product>";
		data += "<manufacturer>" + manufacturers[i].toString() + "</manufacturer>";
		data += "<product>" + products[i].toString() + "</product>";
		data += "<price>" + prices[i].toString() + "</price>";
		data += "</product>";
	}
	data += "</products>";

	response.object = new XML(data);

      ]]></execute>
    </select>
  </bindings>
</table>
